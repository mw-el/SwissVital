<form id="multiStepForm" name="buchung" method="POST" data-netlify="true">
  <!-- Hidden input for Netlify -->
  <input type="hidden" name="form-name" value="buchung">

  <!-- Schritt 1: E-Mail & Standort -->
  <div class="form-step active" id="step-1">
    <h3 class="text-center mb-4 step-title">Schritt 1 von 3: E-Mail & Standort</h3>

    <div class="form-floating mb-3">
      <input class="form-control" id="email" type="email" name="email" placeholder="name@example.com" required>
      <label for="email">E-Mail-Adresse *</label>
    </div>

    <div class="form-floating mb-3">
      <select class="form-select" id="standort" name="standort" required>
        <option value="">Bitte wählen</option>
        <option value="Zürich">Zürich</option>
        <option value="Bern">Bern</option>
        <option value="Basel">Basel</option>
      </select>
      <label for="standort">Standort *</label>
    </div>

    <div class="form-check-container mb-3">
      <input class="form-check-input" type="checkbox" id="datenschutz1" name="datenschutz1" required>
      <label class="form-check-label" for="datenschutz1">Ich stimme der Datenverarbeitung zu.</label>
    </div>

    <div class="d-grid button-container">
      <button class="btn btn-primary btn-xl" type="button" onclick="nextStep(1)">Weiter</button>
    </div>
  </div>

  <!-- Schritt 2: Persönliche Angaben -->
  <div class="form-step" id="step-2">
    <h3 class="text-center mb-4 step-title">Schritt 2 von 3: Persönliche Angaben</h3>

    <div class="form-floating mb-3">
      <input class="form-control" id="vorname" type="text" name="vorname" placeholder="Vorname" required>
      <label for="vorname">Vorname *</label>
    </div>

    <div class="form-floating mb-3">
      <input class="form-control" id="nachname" type="text" name="nachname" placeholder="Nachname" required>
      <label for="nachname">Nachname *</label>
    </div>

    <div class="d-flex justify-content-between button-container">
      <button class="btn btn-secondary btn-xl" type="button" onclick="prevStep(2)">Zurück</button>
      <button class="btn btn-primary btn-xl" type="button" onclick="nextStep(2)">Weiter</button>
    </div>
  </div>

  <!-- Schritt 3: Untersuchung & Abschluss -->
  <div class="form-step" id="step-3">
    <h3 class="text-center mb-4 step-title">Schritt 3 von 3: Abschluss</h3>

    <div class="form-floating mb-3">
      <select class="form-select" id="untersuchung" name="untersuchung" required>
        <option value="">Bitte auswählen</option>
        <option value="Produkt 1">Produkt 1</option>
        <option value="Produkt 2">Produkt 2</option>
        <option value="Produkt 3">Produkt 3</option>
      </select>
      <label for="untersuchung">Untersuchung *</label>
    </div>

    <div class="form-floating mb-3">
      <input class="form-control" id="termin" type="date" name="termin" required>
      <label for="termin">Gewünschter Termin *</label>
    </div>

    <div class="form-check-container mb-3">
      <input class="form-check-input" type="checkbox" id="datenschutz2" name="datenschutz2" required>
      <label class="form-check-label" for="datenschutz2">Ich habe die Datenschutzerklärung gelesen und akzeptiere sie.</label>
    </div>

    <div class="d-flex justify-content-between button-container">
      <button class="btn btn-secondary btn-xl" type="button" onclick="prevStep(3)">Zurück</button>
      <button class="btn btn-primary btn-xl" id="submitButton" type="submit">Termin buchen</button>
    </div>
  </div>
</form>

<script>
  const CONFIG = {
    emails: { "Zürich": "zuerich@example.com", "Bern": "bern@example.com", "Basel": "basel@example.com" },
    locations: ["Zürich", "Bern", "Basel"],
    tests: {
      "Produkt 1": "Produkt 1 - CHF 1970.-",
      "Produkt 2": "Produkt 2 - CHF 2350.-",
      "Produkt 3": "Produkt 3 - CHF 850.-"
    }
  };

  // Optionen für Standort einfügen
  const standortSelect = document.getElementById("standort");
  CONFIG.locations.forEach(location => {
    let option = new Option(location, location);
    standortSelect.appendChild(option);
  });

  // Optionen für Untersuchung einfügen
  const untersuchungSelect = document.getElementById("untersuchung");
  Object.entries(CONFIG.tests).forEach(([key, value]) => {
    let option = new Option(value, key);
    untersuchungSelect.appendChild(option);
  });

  // Navigation zwischen Schritten
  function nextStep(currentStep) {
    document.getElementById(`step-${currentStep}`).classList.remove("active");
    document.getElementById(`step-${currentStep + 1}`).classList.add("active");
  }
  function prevStep(currentStep) {
    document.getElementById(`step-${currentStep}`).classList.remove("active");
    document.getElementById(`step-${currentStep - 1}`).classList.add("active");
  }

  // Formularübermittlung
  document.getElementById("multiStepForm").addEventListener("submit", function(event) {
    event.preventDefault();

    // Formulardaten sammeln
    const email = document.getElementById("email").value;
    const standort = standortSelect.value;
    const vorname = document.getElementById("vorname").value;
    const nachname = document.getElementById("nachname").value;
    const geburtsdatum = document.getElementById("geburtsdatum").value;
    const strasse = document.getElementById("strasse").value;
    const plz = document.getElementById("plz").value;
    const ort = document.getElementById("ort").value;
    const telefon = document.getElementById("telefon").value;
    const untersuchungKey = document.getElementById("untersuchung").value;
    const untersuchungText = document.getElementById("untersuchung").selectedOptions[0].text;
    const termin = document.getElementById("termin").value;

    // Übersicht der eingegebenen Daten erstellen
    const summaryContent = document.getElementById("summaryContent");
    summaryContent.innerHTML = `
      <ul class="list-group">
        <li class="list-group-item"><strong>E-Mail:</strong> ${email}</li>
        <li class="list-group-item"><strong>Standort:</strong> ${standort}</li>
        <li class="list-group-item"><strong>Vorname:</strong> ${vorname}</li>
        <li class="list-group-item"><strong>Nachname:</strong> ${nachname}</li>
        <li class="list-group-item"><strong>Geburtsdatum:</strong> ${geburtsdatum}</li>
        <li class="list-group-item"><strong>Strasse:</strong> ${strasse}</li>
        <li class="list-group-item"><strong>PLZ:</strong> ${plz}</li>
        <li class="list-group-item"><strong>Ort:</strong> ${ort}</li>
        <li class="list-group-item"><strong>Telefon:</strong> ${telefon}</li>
        <li class="list-group-item"><strong>Untersuchung:</strong> ${untersuchungText}</li>
        <li class="list-group-item"><strong>Termin:</strong> ${termin}</li>
      </ul>
    `;

    // Bestätigungsmail-Adresse anzeigen
    document.getElementById("confirmationEmail").textContent = email;

    // Formular ausblenden und Erfolgsnachricht anzeigen
    document.getElementById("multiStepForm").classList.add("d-none");
    document.getElementById("successMessage").classList.remove("d-none");
  });
</script>
